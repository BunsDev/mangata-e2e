<!DOCTYPE html>
<html>
  <head>
    <title>Chart using XML Data</title>
    <script
      type="text/javascript"
      src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://canvasjs.com/assets/script/canvasjs.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://requirejs.org/docs/release/2.3.5/minified/require.js"
    ></script>
    <script type="text/javascript">
        var data = [];
            window.onload = function () {
              
              var dataPoints = [];

              function getDataPointsFromCSV(csv) {
                var dataPoints = (csvLines = points = []);
                csvLines = csv.split(/[\r?\n|\r|\n]+/);

                for (var i = 0; i < csvLines.length; i++)
                  if (csvLines[i].length > 0) {
                    points = csvLines[i].split(",");
                    dataPoints.push({
                      x: parseFloat(points[0]),
                      y: parseFloat(points[1]),
                    });
                  }
                return dataPoints;
              }
          
      //        const data = "";
      //        var chart = new CanvasJS.Chart("chartContainer", {
      //          title: {
      //            text: "Chart from CSV",
      //          },
      //          data: [
      //            {
      //              type: "line",
      //              dataPoints: getDataPointsFromCSV(data),
      //            },
      //          ],
      //        });
      //        chart.render();
            };
            function getDataPointsFromCSV(csv) {
                var dataPoints = (csvLines = points = []);
                csvLines = csv.split(/[\r?\n|\r|\n]+/);

                for (var i = 0; i < csvLines.length; i++)
                  if (csvLines[i].length > 0) {
                    points = csvLines[i].split(",");
                    dataPoints.push({
                      x: parseFloat(points[0]),
                      y: parseFloat(points[1]),
                    });
                  }
                return dataPoints;
              }
            function loadFile(file) {
              file.text().then( (result) => {
                data.push(
                    {
                        type: "line",
                        dataPoints: getDataPointsFromCSV(result),
                })
                var chart = new CanvasJS.Chart("chartContainer", {
                title: {
                  text: "Chart from CSV",
                },
                data: 
                  data
              });
              chart.render();
              } );
              
            }
    </script>
  </head>
  <body>
    <div id="chartContainer" style="width: 100%; height: 600px"></div>
    <input type="file" onchange="loadFile(this.files[0])" />
  </body>
</html>
